# 3813ICT Assignment

## Git
The git repository has the server folder (for the backend) and the src folder from the angular project as well as a few angular config files. The repository has 2 branches. One of them (named phase-1) has all the stuff done for the phase 1 submission. The other one (named phase-2) will be where all the stuff for the phase 2 submission will be done. This will be merged into master before submission. The approach that was taken for version control was to make a new commit after a milestone was achieved (e.g. adding the ability to create groups).

## Data Structures
The main data for the server is stored as a json object. This object has two main parts: users and groups. The users are stored as a map with the key being the username and the value being an object that contains the data for the user. The current data that users can have is their email as a string, the role as a string and an array of the names of groups that they are a group assistant for. The groups are also stored as a map with the key being the group name and the value being an object that contains the data for the group. The current data that groups can have is an object that contains the channels and an array that contains the usernames of the users that have access to the group. The object that contains the channels for a group is a map with the channel name as the key and an object with the channel data for the value. The current data that channels can have is an array of the usernames of the users that have access to the channel and an array of the chat messages that have been sent in the channel.

## Routes
A route named auth takes a username and returns it if the user exists. A route named getUserRole takes a username and returns the role of the user and an array of the names of groups that they are a group assistant of. A route named getAuthorisedGroups takes a username and returns an array of the names of the groups that the user has access to (unless they are a super admin or group admin, in which case it sends a list of all group names). A route named getAuthorisedGroupChannels takes a username and group name and returns an array of the names of the channels that the user has access to in the group (unless they are a super admin or group admin, in which case it sends a list of all channel names for that group). A route called deleteChannel takes a group name and channel name and deletes the channel from the group. A route called deleteGroup takes a group name and deletes the group. A route called createChannel takes a group name and a channel name and creates a channel with that name in the group. A route called createGroup takes a group name and creates the group. A route called getUsers returns a list of all the users that have been registered. A route called updateUser takes a username, an object containing the user data and a Boolean for if the user is new and updates the user with the supplied username if it isn’t new and creates the user if it is and there isn’t already a user with that name. A route called deleteUser takes a username and deletes that user. A route called getAuthorisedGroupUsers takes a group name and returns an object that has the names of all the users who have access to the group as the keys. A route called addRemoveGroupUser takes a username, a group name and a Boolean for whether the user is being removed. If the Boolean is true the user is removed from the array of users that can access the group, if it’s false, they are added to it. A route called getGroupAssis takes a group name and returns an object that has the names of all the group assistants of the group as keys. A route called addRemoveGroupAssis takes a username, a group name and a Boolean for whether the user is being removed. If the Boolean is true the group is removed from the user’s array of names of groups they are group assistants of, if it’s false, they it is added to it. A route called getGroupUsers takes a group name and returns an array of the usernames of the users that have access to the group. A route called getAuthorisedChannelUsers takes a group name and a channel name and returns an object with the users that have access to that channel in that group as the keys.  A route called addRemoveChannelUser takes a username, a group name, a channel name and a Boolean for whether the user is being removed. If the Boolean is true the user is removed from the array of users that can access the channel in the group, if it’s false, they are added to it.

## Architecture
The frontend angular server has two components and two services. The main app component is used to show the log out button whenever the user is not on the login screen. One of the components (names login) handles logging onto the server. The other component (named home) handles stuff relating to selecting a channel, creating and deleting channels, adding users to channels and groups, and creating users. One of the services (named data) contains all the functions for grabbing the data that is stored in the backend server. The other service (named backend) contains the functions for actually sending the requests to the backend. 
